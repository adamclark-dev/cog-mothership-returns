{% extends '::return:listing:template' %}

{% block returns %}
	<hgroup class="title">
		<h1>Returns</h1>
	</hgroup>

	<div class="container-content">
	{% if not returns is empty %}
		<table class="return-listing">
			<thead>
			<tr>
				<th><span>Item</span></th>
				<th><span>Created at</span></th>
				<th><span>User</span></th>
				<th><span>Resolution</span></th>
				<th><span>Status</span></th>
				<th><span>Balance</span></th>
				<th><span>Payee</span></th>
			</tr>
			</thead>
			<tbody>
				{% for return in returns %}
					<tr>
						<td><a href="{{ url('ms.commerce.order.view.return', {orderID: return.order.id}) }}">{{ return.item.productName }}</a></td>
						<td>{{ return.authorship.createdAt|date }}</td>
						<td><a href="{{ url('ms.cp.user.admin.detail.edit', {userID: return.order.user.id}) }}">{{ return.order.user.name }}</a></td>
						<td>{{ return.resolution }}</td>
						<td>{{ return.item.status }}</td>
						<td>
							{% if not return.hasBalance %}
								{% if return.payeeIsClient %}
									{{ (0 - return.calculatedBalance)|price }} (calculated)
								{% elseif return.payeeIsCustomer %}
									{{ return.calculatedBalance|price }} (calculated)
								{% endif %}
							{% else %}
								{% if return.payeeIsClient %}
									{{ (0 - return.balance)|price }}
								{% elseif return.payeeIsCustomer %}
									{{ return.balance|price }}
								{% endif %}
							{% endif %}
						</td>
						<td>
							{% if return.payeeIsClient %}
								You
							{% elseif return.payeeIsCustomer %}
								Customer
							{% endif %}
						</tr>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	{% else %}
		<p>{{ 'ms.commerce.return.status.none'|trans }}</p>
	{% endif %}
	</div>
{% endblock %}